### linux 中 如何 检索 某 目录下指定文件 的 指定内容

inux查找文件内容的常用命令方法。  

从文件内容查找匹配指定字符串的行：

$ grep "被查找的字符串" 文件名

例子：在当前目录里第一级文件夹中寻找包含指定字符串的.in文件

grep "thermcontact" */*.in

 

从文件内容查找与正则表达式匹配的行：

$ grep –e “正则表达式” 文件名

 

查找时不区分大小写：

$ grep –i "被查找的字符串" 文件名



查找匹配的行数：

$ grep -c "被查找的字符串" 文件名

 

从文件内容查找不匹配指定字符串的行：

$ grep –v "被查找的字符串" 文件名

 

从根目录开始查找所有扩展名为.log的文本文件，并找出包含”ERROR”的行

find / -type f -name "*.log" | xargs grep "ERROR"

例子：从当前目录开始查找所有扩展名为.in的文本文件，并找出包含”thermcontact”的行

find . -name "*.in" | xargs grep "thermcontact"

 

### 计算一个项目文件夹(多层级)中所有PHP文件的总行数

wc /path/to/xx.php  返回 行 单词数 字节数

find ./ -name ‘*.php’|cat|wc



### 查询日志

 先必须了解两个最基本的命令:
tail  -n  10  test.log   查询日志尾部最后10行的日志;
tail -n +10 test.log    查询10行之后的所有日志;
head -n 10  test.log   查询日志文件中的头10行日志;
head -n -10  test.log   查询日志文件除了最后10行的其他所有日志;

场景1: 按行号查看---过滤出关键字附近的日志
因为通常时候我们用grep拿到的日志很少,我们需要查看附近的日志.
我是这样做的,首先: cat -n test.log |grep "地形"  得到关键日志的行号

<3>得到"地形"关键字所在的行号是102行. 此时如果我想查看这个关键字前10行和后10行的日志:
cat -n test.log |tail -n +92|head -n 20
tail -n +92表示查询92行之后的日志
head -n 20 则表示在前面的查询结果里再查前20条记录

场景2:那么按日期怎么查呢?  通常我们非常需要查找指定时间端的日志
sed -n '/2014-12-17 16:17:20/,/2014-12-17 16:17:36/p'  test.log
特别说明:上面的两个日期必须是日志中打印出来的日志,否则无效.  